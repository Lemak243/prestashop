"use strict";(self.webpackChunkawesome_components=self.webpackChunkawesome_components||[]).push([[520],{2520:(it,C,e)=>{e.r(C),e.d(C,{ReactiveStateModule:()=>tt});var r=e(6814),l=e(3403),U=e(2572),m=e(7398),S=e(7921),d=(()=>((d=d||{}).LASTNAME="lastName",d.FIRSTNAME="firstName",d.COMPANY="company",d))(),t=e(5879),T=e(5619);const g_apiURL="http://localhost:3000";var O=e(6321),x=e(5211),c=e(8180),N=e(9360),M=e(8251),F=e(2420),b=e(975),E=e(1631),J=e(4829);function Z(n,s){return s?a=>(0,x.z)(s.pipe((0,c.q)(1),function R(){return(0,N.e)((n,s)=>{n.subscribe((0,M.x)(s,F.Z))})}()),a.pipe(Z(n))):(0,E.z)((a,i)=>(0,J.Xf)(n(a,i)).pipe((0,c.q)(1),(0,b.h)(a)))}var I=e(4825);function L(n,s=O.z){const a=(0,I.H)(n,s);return Z(()=>a)}var p=e(9397),f=e(4664),B=e(9862);let v=(()=>{class n{constructor(a){this.http=a,this._loading$=new T.X(!1),this._candidates$=new T.X([]),this.lastCandidatesLoad=0}get laoding$(){return this._loading$.asObservable()}get candidates$(){return this._candidates$.asObservable()}setLoadingStatus(a){this._loading$.next(a)}getCandidatesFromServer(){Date.now()-this.lastCandidatesLoad<=3e5||(this.setLoadingStatus(!0),this.http.get(`${g_apiURL}/candidates`).pipe(L(1e3),(0,p.b)(a=>{this.lastCandidatesLoad=Date.now(),this._candidates$.next(a),this.setLoadingStatus(!1)})).subscribe())}getCandidateById(a){return this.lastCandidatesLoad||this.getCandidatesFromServer(),this.candidates$.pipe((0,m.U)(i=>i.filter(o=>o.id===a)[0]))}refuseCandidate(a){this.setLoadingStatus(!0),this.http.delete(`${g_apiURL}/candidates/${a}`).pipe(L(1e3),(0,f.w)(()=>this.candidates$),(0,c.q)(1),(0,m.U)(i=>i.filter(o=>o.id!==a)),(0,p.b)(i=>{this._candidates$.next(i),this.setLoadingStatus(!1)})).subscribe()}hireCandidate(a){this.candidates$.pipe((0,c.q)(1),(0,m.U)(i=>i.map(o=>o.id===a?{...o,company:"Snapface Ltd"}:o)),(0,p.b)(i=>this._candidates$.next(i)),(0,f.w)(i=>this.http.patch(`${g_apiURL}/candidates/${a}`,i.find(o=>o.id===a)))).subscribe()}}return n.\u0275fac=function(a){return new(a||n)(t.LFG(B.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var h=e(6223),u=e(5195),A=e(1919),Y=e(617),y=e(9157),H=e(2032),$=e(5940),Q=e(1911),z=e(3680);function G(n,s){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&n){const a=s.$implicit;t.Q6J("value",a.value),t.xp6(1),t.Oqu(a.label)}}function j(n,s){1&n&&t._UZ(0,"mat-spinner")}function P(n,s){if(1&n&&(t.TgZ(0,"a",9),t._UZ(1,"img",10),t.TgZ(2,"h3",11),t._uU(3),t.qZA(),t.TgZ(4,"p",11),t._uU(5),t.qZA()()),2&n){const a=s.$implicit;t.Q6J("routerLink",a.id.toString()),t.xp6(1),t.Q6J("src",a.imageUrl,t.LSH)("alt",a.lastName),t.xp6(2),t.AsE("",a.firstName," ",a.lastName,""),t.xp6(2),t.AsE("",a.job," chez ",a.company,"")}}function X(n,s){if(1&n&&(t.TgZ(0,"mat-nav-list"),t.YNc(1,P,6,7,"a",8),t.qZA()),2&n){const a=s.ngIf;t.xp6(1),t.Q6J("ngForOf",a)}}let K=(()=>{class n{constructor(a,i){this.candidatesService=a,this.formBluilder=i}ngOnInit(){this.initForm(),this.initObservables(),this.candidatesService.getCandidatesFromServer()}initForm(){this.searchCtrl=this.formBluilder.control(""),this.searchTypeCtrl=this.formBluilder.control(d.LASTNAME),this.searchTypeOptions=[{value:d.LASTNAME,label:"Nom"},{value:d.FIRSTNAME,label:"Pr\xe9nom"},{value:d.COMPANY,label:"Entreprise"}]}initObservables(){this.loading$=this.candidatesService.laoding$;const a=this.searchCtrl.valueChanges.pipe((0,S.O)(this.searchCtrl.value),(0,m.U)(o=>o.toLowerCase())),i=this.searchTypeCtrl.valueChanges.pipe((0,S.O)(this.searchTypeCtrl.value));this.candidates$=(0,U.a)([a,i,this.candidatesService.candidates$]).pipe((0,m.U)(([o,at,nt])=>nt.filter(et=>et[at].toLowerCase().includes(o))))}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(v),t.Y36(h.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-candidate-list"]],decls:19,vars:9,consts:[[1,"form"],["appearance","fill"],["matInput","","type","text",3,"formControl"],["matSuffix",""],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["matListAvatar","",3,"src","alt"],["matLine",""]],template:function(a,i){1&a&&(t.TgZ(0,"mat-card")(1,"mat-card-title-group")(2,"mat-card-title"),t._uU(3," Candidats "),t.qZA(),t.TgZ(4,"div",0)(5,"mat-form-field",1),t._UZ(6,"input",2),t.TgZ(7,"mat-icon",3),t._uU(8,"search"),t.qZA()(),t.TgZ(9,"mat-form-field",1)(10,"mat-select",4),t.YNc(11,G,2,2,"mat-option",5),t.qZA()()()(),t.TgZ(12,"mat-card-title-group")(13,"mat-card-title"),t._uU(14," Candidats "),t.qZA()(),t.YNc(15,j,1,0,"mat-spinner",6),t.ALo(16,"async"),t.YNc(17,X,2,1,"mat-nav-list",6),t.ALo(18,"async"),t.qZA()),2&a&&(t.xp6(6),t.Q6J("formControl",i.searchCtrl),t.xp6(4),t.Q6J("formControl",i.searchTypeCtrl),t.xp6(1),t.Q6J("ngForOf",i.searchTypeOptions),t.xp6(4),t.Q6J("ngIf",t.lcZ(16,5,i.loading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(18,7,i.candidates$)))},dependencies:[r.sg,r.O5,l.rH,u.a8,u.n5,u.C1,A.Hk,A.Tg,Y.Hw,y.KE,y.R9,H.Nt,$.Ou,Q.gD,z.ey,h.Fj,h.JJ,h.oH,r.Ov],changeDetection:0}),n})();var W=e(2296);function D(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"img",3),t.TgZ(2,"div",4)(3,"h1"),t._uU(4),t.qZA(),t.TgZ(5,"h2"),t._uU(6),t.qZA(),t.TgZ(7,"h3"),t._uU(8),t.qZA()(),t.BQk()),2&n){const a=s.ngIf;t.xp6(1),t.Q6J("src",a.imageUrl,t.LSH)("alt",a.firstName+" "+a.lastName),t.xp6(3),t.AsE("",a.firstName," ",a.lastName,""),t.xp6(2),t.lnq("",a.job,", ",a.department," chez ",a.company,""),t.xp6(2),t.hij("Contact : ",a.email,"")}}function V(n,s){1&n&&t._UZ(0,"mat-spinner")}function q(n,s){if(1&n){const a=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onHire())}),t._uU(2,"EMBAUCHER"),t.qZA(),t.TgZ(3,"button",7),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onRefuse())}),t._uU(4,"REFUSER"),t.qZA()(),t.TgZ(5,"button",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onGoBack())}),t._uU(6,"RETOUR"),t.qZA()}}const k=[{path:"candidates",component:K},{path:"candidates/:id",component:(()=>{class n{constructor(a,i,o){this.candidatesService=a,this.route=i,this.router=o}ngOnInit(){this.initObservables()}initObservables(){this.loading$=this.candidatesService.laoding$,this.candidate$=this.route.params.pipe((0,f.w)(a=>this.candidatesService.getCandidateById(+a.id)))}onHire(){this.candidate$.pipe((0,c.q)(1),(0,p.b)(a=>{this.candidatesService.hireCandidate(a.id),this.onGoBack()})).subscribe()}onRefuse(){this.candidate$.pipe((0,c.q)(1),(0,p.b)(a=>{this.candidatesService.refuseCandidate(a.id),this.onGoBack()})).subscribe()}onGoBack(){this.router.navigateByUrl("/reactive-state/candidates")}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(v),t.Y36(l.gz),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-single-candidate"]],decls:8,vars:7,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["buttons",""],[3,"src","alt"],[1,"employee-info"],[1,"action-buttons"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(a,i){if(1&a&&(t.TgZ(0,"mat-card"),t.YNc(1,D,9,8,"ng-container",0),t.ALo(2,"async"),t.TgZ(3,"mat-card-actions"),t.YNc(4,V,1,0,"mat-spinner",1),t.ALo(5,"async"),t.YNc(6,q,7,0,"ng-template",null,2,t.W1O),t.qZA()()),2&a){const o=t.MAs(7);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,i.candidate$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,5,i.loading$))("ngIfElse",o)}},dependencies:[r.O5,u.a8,u.hq,W.lW,$.Ou,r.Ov],styles:["mat-card[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{border-radius:50%}button[_ngcontent-%COMP%]{margin:5px}"],changeDetection:0}),n})()},{path:"",pathMatch:"full",redirectTo:"candidates"}];let w=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(k),l.Bz]}),n})();var _=e(6208);let tt=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[v],imports:[r.ez,w,_.m]}),n})()}}]);